{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useQuery, useQueryClient } from \"react-query\";\nimport { personService } from \"../../Modules/PersonModule/Person.service\";\nimport { notificationMsg } from \"../../Services/BaseService\";\nimport { errorMsg } from \"../../Services/MessageDisplayHandler\";\n\nconst TeacherHomeHook = () => {\n  _s();\n\n  const loggedUser = useQueryClient().getQueryData(\"activeUser\");\n\n  const fetchCourses = async () => {\n    const res = await personService.fetchMyCourses(loggedUser.id);\n    return res.data;\n  };\n\n  const parseMyCourses = data => {\n    let myCourses = data;\n    myCourses.forEach((course, i) => {\n      myCourses[i] = {\n        id: myCourses[i].id,\n        name: myCourses[i].name,\n        average_mark: myCourses[i].average_mark,\n        price: myCourses[i].price\n      };\n    });\n    return myCourses;\n  };\n\n  return useQuery(\"teacherMyCourses\", fetchCourses, {\n    onError: err => {\n      errorMsg(notificationMsg(err, null));\n    },\n    onSettled: val => {\n      parseMyCourses(val);\n    }\n  });\n};\n\n_s(TeacherHomeHook, \"FbJocrnl8otF4BgWT4r2nF2NRc4=\", false, function () {\n  return [useQueryClient, useQuery];\n});\n\n_c = TeacherHomeHook;\nexport default TeacherHomeHook;\n\nvar _c;\n\n$RefreshReg$(_c, \"TeacherHomeHook\");","map":{"version":3,"names":["useQuery","useQueryClient","personService","notificationMsg","errorMsg","TeacherHomeHook","loggedUser","getQueryData","fetchCourses","res","fetchMyCourses","id","data","parseMyCourses","myCourses","forEach","course","i","name","average_mark","price","onError","err","onSettled","val"],"sources":["/Users/nebojsa/projects/MERN-academy/factory-academy-react-query-ts/src/Components/CustomHooks/TeacherHomeHook.ts"],"sourcesContent":["import { useQuery, useQueryClient } from \"react-query\";\nimport { personService } from \"../../Modules/PersonModule/Person.service\";\nimport { notificationMsg } from \"../../Services/BaseService\";\nimport { errorMsg } from \"../../Services/MessageDisplayHandler\";\n\nconst TeacherHomeHook = () => {\n  const loggedUser: any = useQueryClient().getQueryData(\"activeUser\");\n\n  const fetchCourses = async () => {\n    const res = await personService.fetchMyCourses(loggedUser.id);\n    return res.data;\n  };\n\n  const parseMyCourses = (data: any) => {\n    let myCourses = data;\n    myCourses.forEach((course: object, i: number) => {\n      myCourses[i] = {\n        id: myCourses[i].id,\n        name: myCourses[i].name,\n        average_mark: myCourses[i].average_mark,\n        price: myCourses[i].price,\n      };\n    });\n    return myCourses;\n  };\n\n  return useQuery(\"teacherMyCourses\", fetchCourses, {\n    onError: (err: any) => {\n      errorMsg(notificationMsg(err, null));\n    },\n    onSettled: (val: any) => {\n      parseMyCourses(val);\n    },\n  });\n};\n\nexport default TeacherHomeHook;\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,cAAnB,QAAyC,aAAzC;AACA,SAASC,aAAT,QAA8B,2CAA9B;AACA,SAASC,eAAT,QAAgC,4BAAhC;AACA,SAASC,QAAT,QAAyB,sCAAzB;;AAEA,MAAMC,eAAe,GAAG,MAAM;EAAA;;EAC5B,MAAMC,UAAe,GAAGL,cAAc,GAAGM,YAAjB,CAA8B,YAA9B,CAAxB;;EAEA,MAAMC,YAAY,GAAG,YAAY;IAC/B,MAAMC,GAAG,GAAG,MAAMP,aAAa,CAACQ,cAAd,CAA6BJ,UAAU,CAACK,EAAxC,CAAlB;IACA,OAAOF,GAAG,CAACG,IAAX;EACD,CAHD;;EAKA,MAAMC,cAAc,GAAID,IAAD,IAAe;IACpC,IAAIE,SAAS,GAAGF,IAAhB;IACAE,SAAS,CAACC,OAAV,CAAkB,CAACC,MAAD,EAAiBC,CAAjB,KAA+B;MAC/CH,SAAS,CAACG,CAAD,CAAT,GAAe;QACbN,EAAE,EAAEG,SAAS,CAACG,CAAD,CAAT,CAAaN,EADJ;QAEbO,IAAI,EAAEJ,SAAS,CAACG,CAAD,CAAT,CAAaC,IAFN;QAGbC,YAAY,EAAEL,SAAS,CAACG,CAAD,CAAT,CAAaE,YAHd;QAIbC,KAAK,EAAEN,SAAS,CAACG,CAAD,CAAT,CAAaG;MAJP,CAAf;IAMD,CAPD;IAQA,OAAON,SAAP;EACD,CAXD;;EAaA,OAAOd,QAAQ,CAAC,kBAAD,EAAqBQ,YAArB,EAAmC;IAChDa,OAAO,EAAGC,GAAD,IAAc;MACrBlB,QAAQ,CAACD,eAAe,CAACmB,GAAD,EAAM,IAAN,CAAhB,CAAR;IACD,CAH+C;IAIhDC,SAAS,EAAGC,GAAD,IAAc;MACvBX,cAAc,CAACW,GAAD,CAAd;IACD;EAN+C,CAAnC,CAAf;AAQD,CA7BD;;GAAMnB,e;UACoBJ,c,EAoBjBD,Q;;;KArBHK,e;AA+BN,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}