{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useContext } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useHistory } from \"react-router-dom\";\nimport { AppContext } from \"../Context/AppProvider\";\nimport { ActionTypes } from \"../Context/Reducers/App/AppProvider.types\";\nimport { authService } from \"../Modules/AuthModule/Auth.service\";\nexport const useFetchActiveUser = () => {\n  _s();\n\n  // eslint-disable-next-line\n  const [contextSTate, dispatch] = useContext(AppContext);\n  const history = useHistory();\n\n  const fetch = async () => {\n    dispatch({\n      type: ActionTypes.SET_LOADER,\n      payload: true\n    });\n    const res = await authService.fetchActiveAccount();\n    return res.data;\n  };\n\n  return useQuery(\"activeUser\", fetch, {\n    onSuccess: val => {\n      dispatch({\n        type: ActionTypes.SET_LOADER,\n        payload: false\n      });\n      dispatch({\n        type: ActionTypes.SET_USER,\n        payload: val\n      });\n    },\n    onError: () => {\n      history.push(\"/login\");\n    },\n    onSettled: () => {\n      dispatch({\n        type: ActionTypes.SET_LOADER,\n        payload: false\n      });\n    }\n  });\n};\n\n_s(useFetchActiveUser, \"sKaco/n78qm1tOUUfBPkHXsbAVc=\", false, function () {\n  return [useHistory, useQuery];\n});","map":{"version":3,"names":["useContext","useQuery","useHistory","AppContext","ActionTypes","authService","useFetchActiveUser","contextSTate","dispatch","history","fetch","type","SET_LOADER","payload","res","fetchActiveAccount","data","onSuccess","val","SET_USER","onError","push","onSettled"],"sources":["/Users/nebojsa/projects/MERN-academy/factory-academy-react-query-ts/src/Services/Router.service.tsx"],"sourcesContent":["import { useContext } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useHistory } from \"react-router-dom\";\nimport { AppContext } from \"../Context/AppProvider\";\nimport { ActionTypes } from \"../Context/Reducers/App/AppProvider.types\";\nimport { authService } from \"../Modules/AuthModule/Auth.service\";\n\nexport const useFetchActiveUser = () => {\n  // eslint-disable-next-line\n  const [contextSTate, dispatch] = useContext(AppContext);\n  const history = useHistory();\n\n  const fetch = async () => {\n    dispatch({\n      type: ActionTypes.SET_LOADER,\n      payload: true,\n    });\n    const res = await authService.fetchActiveAccount();\n    return res.data;\n  };\n\n  return useQuery(\"activeUser\", fetch, {\n    onSuccess: (val: any) => {\n      dispatch({\n        type: ActionTypes.SET_LOADER,\n        payload: false,\n      });\n      dispatch({\n        type: ActionTypes.SET_USER,\n        payload: val,\n      });\n    },\n    onError: () => {\n      history.push(\"/login\");\n    },\n    onSettled: () => {\n      dispatch({\n        type: ActionTypes.SET_LOADER,\n        payload: false,\n      });\n    },\n  });\n};\n"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,wBAA3B;AACA,SAASC,WAAT,QAA4B,2CAA5B;AACA,SAASC,WAAT,QAA4B,oCAA5B;AAEA,OAAO,MAAMC,kBAAkB,GAAG,MAAM;EAAA;;EACtC;EACA,MAAM,CAACC,YAAD,EAAeC,QAAf,IAA2BR,UAAU,CAACG,UAAD,CAA3C;EACA,MAAMM,OAAO,GAAGP,UAAU,EAA1B;;EAEA,MAAMQ,KAAK,GAAG,YAAY;IACxBF,QAAQ,CAAC;MACPG,IAAI,EAAEP,WAAW,CAACQ,UADX;MAEPC,OAAO,EAAE;IAFF,CAAD,CAAR;IAIA,MAAMC,GAAG,GAAG,MAAMT,WAAW,CAACU,kBAAZ,EAAlB;IACA,OAAOD,GAAG,CAACE,IAAX;EACD,CAPD;;EASA,OAAOf,QAAQ,CAAC,YAAD,EAAeS,KAAf,EAAsB;IACnCO,SAAS,EAAGC,GAAD,IAAc;MACvBV,QAAQ,CAAC;QACPG,IAAI,EAAEP,WAAW,CAACQ,UADX;QAEPC,OAAO,EAAE;MAFF,CAAD,CAAR;MAIAL,QAAQ,CAAC;QACPG,IAAI,EAAEP,WAAW,CAACe,QADX;QAEPN,OAAO,EAAEK;MAFF,CAAD,CAAR;IAID,CAVkC;IAWnCE,OAAO,EAAE,MAAM;MACbX,OAAO,CAACY,IAAR,CAAa,QAAb;IACD,CAbkC;IAcnCC,SAAS,EAAE,MAAM;MACfd,QAAQ,CAAC;QACPG,IAAI,EAAEP,WAAW,CAACQ,UADX;QAEPC,OAAO,EAAE;MAFF,CAAD,CAAR;IAID;EAnBkC,CAAtB,CAAf;AAqBD,CAnCM;;GAAMP,kB;UAGKJ,U,EAWTD,Q"},"metadata":{},"sourceType":"module"}