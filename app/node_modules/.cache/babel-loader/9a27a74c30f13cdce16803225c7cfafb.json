{"ast":null,"code":"var _jsxFileName = \"/Users/nebojsa/projects/MERN-academy/factory-academy-react-query-ts/src/Components/Modals/RequestAcceptModal.tsx\",\n    _s = $RefreshSig$();\n\nimport \"../../App.scss\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { notificationMsg } from \"../../Services/BaseService\";\nimport { successMsg, errorMsg } from \"../../Services/MessageDisplayHandler\";\nimport { AppContext } from \"../../Context/AppProvider\";\nimport { personService } from \"../../Modules/PersonModule/Person.service\";\nimport { ActionTypes } from \"../../Context/Reducers/App/AppProvider.types\";\nimport { useMutation } from \"react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultForm = {\n  course_id: null,\n  accepted: null\n};\n\nconst sendData = requestAcceptMutation => {\n  requestAcceptMutation.mutate();\n};\n\nconst RequestAcceptModal = () => {\n  _s();\n\n  const [contextState, dispatch] = useContext(AppContext);\n  const [form, setForm] = useState(defaultForm);\n\n  const resolvingAplication = status => {\n    setForm({ ...form,\n      course_id: contextState.modal.data.course_id,\n      accepted: status\n    });\n  };\n\n  const close = () => {\n    dispatch({\n      type: ActionTypes.SET_MODAL,\n      payload: {\n        name: \"\",\n        status: false,\n        data: null\n      }\n    });\n  };\n\n  const requestAcceptMutation = useMutation(() => personService.resolveRequest(form), {\n    onError: err => {\n      errorMsg(notificationMsg(err, null));\n      close();\n    },\n    onSuccess: res => {\n      successMsg(notificationMsg(res, \"REQUEST_ACCEPTED\"));\n      close();\n    }\n  });\n  useEffect(() => {\n    if (form.accepted != null) {\n      sendData(requestAcceptMutation);\n    }\n  }, [form.accepted, requestAcceptMutation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"requrest-accept-modal\",\n    className: \"requrest-accept-modal h-1/6 rounded-lg w-2/12 h-3/12 bg-gray-400 flex flex-row absolute text-tiny felx items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between w-full px-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => resolvingAplication(false),\n        className: \"bg-darkRed py-2 px-4 rounded-lg cursor-pointer\",\n        children: \"Reject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => resolvingAplication(true),\n        className: \"bg-darkGreen py-2 px-4 rounded-lg cursor-pointer\",\n        children: \"Accept\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RequestAcceptModal, \"rjLenINVSPqmkiLInHCwEKj//Vw=\", false, function () {\n  return [useMutation];\n});\n\n_c = RequestAcceptModal;\nexport default RequestAcceptModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"RequestAcceptModal\");","map":{"version":3,"names":["useContext","useEffect","useState","notificationMsg","successMsg","errorMsg","AppContext","personService","ActionTypes","useMutation","defaultForm","course_id","accepted","sendData","requestAcceptMutation","mutate","RequestAcceptModal","contextState","dispatch","form","setForm","resolvingAplication","status","modal","data","close","type","SET_MODAL","payload","name","resolveRequest","onError","err","onSuccess","res"],"sources":["/Users/nebojsa/projects/MERN-academy/factory-academy-react-query-ts/src/Components/Modals/RequestAcceptModal.tsx"],"sourcesContent":["import \"../../App.scss\";\nimport { FC, useContext, useEffect, useState } from \"react\";\nimport { notificationMsg } from \"../../Services/BaseService\";\nimport { successMsg, errorMsg } from \"../../Services/MessageDisplayHandler\";\nimport { AppContext } from \"../../Context/AppProvider\";\nimport { personService } from \"../../Modules/PersonModule/Person.service\";\nimport { ActionTypes } from \"../../Context/Reducers/App/AppProvider.types\";\nimport { useMutation } from \"react-query\";\nimport { AxiosError, AxiosResponse } from \"axios\";\nimport { IRequestAcceptForm } from \"../../Services/Interfaces\";\n\nconst defaultForm = {\n  course_id: null,\n  accepted: null,\n};\n\nconst sendData = (requestAcceptMutation: any) => {\n  requestAcceptMutation.mutate();\n};\n\nconst RequestAcceptModal: FC = () => {\n  const [contextState, dispatch] = useContext(AppContext);\n\n  const [form, setForm] = useState<IRequestAcceptForm>(defaultForm);\n\n  const resolvingAplication = (status: any) => {\n    setForm({\n      ...form,\n      course_id: contextState.modal.data.course_id,\n      accepted: status,\n    });\n  };\n\n  const close = () => {\n    dispatch({\n      type: ActionTypes.SET_MODAL,\n      payload: {\n        name: \"\",\n        status: false,\n        data: null,\n      },\n    });\n  };\n\n  const requestAcceptMutation = useMutation(\n    () => personService.resolveRequest(form),\n    {\n      onError: (err: AxiosError) => {\n        errorMsg(notificationMsg(err, null));\n        close();\n      },\n      onSuccess: (res: AxiosResponse<any>) => {\n        successMsg(notificationMsg(res, \"REQUEST_ACCEPTED\"));\n        close();\n      },\n    }\n  );\n\n  useEffect(() => {\n    if (form.accepted != null) {\n      sendData(requestAcceptMutation);\n    }\n  }, [form.accepted, requestAcceptMutation]);\n\n  return (\n    <div\n      id=\"requrest-accept-modal\"\n      className=\"requrest-accept-modal h-1/6 rounded-lg w-2/12 h-3/12 bg-gray-400 flex flex-row absolute text-tiny felx items-center justify-center\"\n    >\n      <div className=\"flex items-center justify-between w-full px-8\">\n        <span\n          onClick={() => resolvingAplication(false)}\n          className=\"bg-darkRed py-2 px-4 rounded-lg cursor-pointer\"\n        >\n          Reject\n        </span>\n        <span\n          onClick={() => resolvingAplication(true)}\n          className=\"bg-darkGreen py-2 px-4 rounded-lg cursor-pointer\"\n        >\n          Accept\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default RequestAcceptModal;\n"],"mappings":";;;AAAA,OAAO,gBAAP;AACA,SAAaA,UAAb,EAAyBC,SAAzB,EAAoCC,QAApC,QAAoD,OAApD;AACA,SAASC,eAAT,QAAgC,4BAAhC;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,sCAArC;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,aAAT,QAA8B,2CAA9B;AACA,SAASC,WAAT,QAA4B,8CAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAIA,MAAMC,WAAW,GAAG;EAClBC,SAAS,EAAE,IADO;EAElBC,QAAQ,EAAE;AAFQ,CAApB;;AAKA,MAAMC,QAAQ,GAAIC,qBAAD,IAAgC;EAC/CA,qBAAqB,CAACC,MAAtB;AACD,CAFD;;AAIA,MAAMC,kBAAsB,GAAG,MAAM;EAAA;;EACnC,MAAM,CAACC,YAAD,EAAeC,QAAf,IAA2BlB,UAAU,CAACM,UAAD,CAA3C;EAEA,MAAM,CAACa,IAAD,EAAOC,OAAP,IAAkBlB,QAAQ,CAAqBQ,WAArB,CAAhC;;EAEA,MAAMW,mBAAmB,GAAIC,MAAD,IAAiB;IAC3CF,OAAO,CAAC,EACN,GAAGD,IADG;MAENR,SAAS,EAAEM,YAAY,CAACM,KAAb,CAAmBC,IAAnB,CAAwBb,SAF7B;MAGNC,QAAQ,EAAEU;IAHJ,CAAD,CAAP;EAKD,CAND;;EAQA,MAAMG,KAAK,GAAG,MAAM;IAClBP,QAAQ,CAAC;MACPQ,IAAI,EAAElB,WAAW,CAACmB,SADX;MAEPC,OAAO,EAAE;QACPC,IAAI,EAAE,EADC;QAEPP,MAAM,EAAE,KAFD;QAGPE,IAAI,EAAE;MAHC;IAFF,CAAD,CAAR;EAQD,CATD;;EAWA,MAAMV,qBAAqB,GAAGL,WAAW,CACvC,MAAMF,aAAa,CAACuB,cAAd,CAA6BX,IAA7B,CADiC,EAEvC;IACEY,OAAO,EAAGC,GAAD,IAAqB;MAC5B3B,QAAQ,CAACF,eAAe,CAAC6B,GAAD,EAAM,IAAN,CAAhB,CAAR;MACAP,KAAK;IACN,CAJH;IAKEQ,SAAS,EAAGC,GAAD,IAA6B;MACtC9B,UAAU,CAACD,eAAe,CAAC+B,GAAD,EAAM,kBAAN,CAAhB,CAAV;MACAT,KAAK;IACN;EARH,CAFuC,CAAzC;EAcAxB,SAAS,CAAC,MAAM;IACd,IAAIkB,IAAI,CAACP,QAAL,IAAiB,IAArB,EAA2B;MACzBC,QAAQ,CAACC,qBAAD,CAAR;IACD;EACF,CAJQ,EAIN,CAACK,IAAI,CAACP,QAAN,EAAgBE,qBAAhB,CAJM,CAAT;EAMA,oBACE;IACE,EAAE,EAAC,uBADL;IAEE,SAAS,EAAC,oIAFZ;IAAA,uBAIE;MAAK,SAAS,EAAC,+CAAf;MAAA,wBACE;QACE,OAAO,EAAE,MAAMO,mBAAmB,CAAC,KAAD,CADpC;QAEE,SAAS,EAAC,gDAFZ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAOE;QACE,OAAO,EAAE,MAAMA,mBAAmB,CAAC,IAAD,CADpC;QAEE,SAAS,EAAC,kDAFZ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA;EAJF;IAAA;IAAA;IAAA;EAAA,QADF;AAqBD,CAjED;;GAAML,kB;UAwB0BP,W;;;KAxB1BO,kB;AAmEN,eAAeA,kBAAf"},"metadata":{},"sourceType":"module"}