{"ast":null,"code":"var _jsxFileName = \"/Users/nebojsa/projects/MERN-academy/app/src/Components/Modals/FinishingCourseModal.tsx\",\n    _s = $RefreshSig$();\n\nimport \"../../App\";\nimport { useContext } from \"react\";\nimport { AppContext } from \"../../Context/AppProvider\";\nimport { notificationMsg } from \"../../Services/BaseService\";\nimport { successMsg, errorMsg } from \"../../Services/MessageDisplayHandler\";\nimport { courseService } from \"../../Modules/CourseModule/Course.service\";\nimport { ActionTypes } from \"../../Context/Reducers/App/AppProvider.types\";\nimport { useMutation, useQueryClient } from \"react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FinishingCourseModal = () => {\n  _s();\n\n  const [contextState, dispatch] = useContext(AppContext);\n  const loggedUser = useQueryClient().getQueryData(\"activeUser\");\n  const form = {\n    complete: true,\n    courseId: contextState.modal.data.course_id,\n    userId: contextState.modal.data.student_id,\n    teacherId: loggedUser === null || loggedUser === void 0 ? void 0 : loggedUser.id\n  };\n\n  const cancel = () => {\n    dispatch({\n      type: ActionTypes.SET_MODAL,\n      payload: {\n        name: \"\",\n        status: false,\n        data: null\n      }\n    });\n  };\n\n  const completeCourse = () => {\n    finishCourseMutation.mutate();\n  };\n\n  const finishCourseMutation = useMutation(() => courseService.completeCourse(form), {\n    onError: err => {\n      errorMsg(notificationMsg(err, null));\n      cancel();\n    },\n    onSuccess: res => {\n      successMsg(notificationMsg(res, \"COURSE_FINISHED\"));\n      cancel();\n    }\n  }); // useEffect(() => {\n  //   setForm({\n  //     complete: true,\n  //     courseId: contextState.modal.data.course_id,\n  //     userId: contextState.modal.data.student_id,\n  //     teacherId: loggedUser?.id,\n  //   });\n  // }, [\n  //   contextState.modal.data.course_id,\n  //   contextState.modal.data.student_id,\n  //   loggedUser?.id,\n  // ]);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"finishing-course-modal\",\n    className: \"course-course-modal rounded-lg w-4/12 xl:w-2/12 h-3/12 bg-gray-400 flex flex-row absolute text-tiny felx items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between w-full px-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: cancel,\n        className: \"bg-darkRed py-2 px-4 rounded-lg cursor-pointer\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: completeCourse,\n        className: \"bg-darkGreen py-2 px-4 rounded-lg cursor-pointer\",\n        children: \"Complete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FinishingCourseModal, \"SyPA/48RPbYf5AAROg4f9vBhQV4=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n\n_c = FinishingCourseModal;\nexport default FinishingCourseModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"FinishingCourseModal\");","map":{"version":3,"names":["useContext","AppContext","notificationMsg","successMsg","errorMsg","courseService","ActionTypes","useMutation","useQueryClient","FinishingCourseModal","contextState","dispatch","loggedUser","getQueryData","form","complete","courseId","modal","data","course_id","userId","student_id","teacherId","id","cancel","type","SET_MODAL","payload","name","status","completeCourse","finishCourseMutation","mutate","onError","err","onSuccess","res"],"sources":["/Users/nebojsa/projects/MERN-academy/app/src/Components/Modals/FinishingCourseModal.tsx"],"sourcesContent":["import \"../../App\";\nimport { useContext, FC } from \"react\";\nimport { AppContext } from \"../../Context/AppProvider\";\nimport { notificationMsg } from \"../../Services/BaseService\";\nimport { successMsg, errorMsg } from \"../../Services/MessageDisplayHandler\";\nimport { courseService } from \"../../Modules/CourseModule/Course.service\";\nimport { ActionTypes } from \"../../Context/Reducers/App/AppProvider.types\";\nimport { useMutation, useQueryClient } from \"react-query\";\nimport { IFinishCourseForm, ILoggedUser } from \"../../Services/Interfaces\";\n\nconst FinishingCourseModal: FC = () => {\n  const [contextState, dispatch] = useContext(AppContext);\n  const loggedUser = useQueryClient().getQueryData<ILoggedUser>(\"activeUser\");\n\n  const form: IFinishCourseForm = {\n    complete: true,\n    courseId: contextState.modal.data.course_id,\n    userId: contextState.modal.data.student_id,\n    teacherId: loggedUser?.id,\n  };\n\n  const cancel = () => {\n    dispatch({\n      type: ActionTypes.SET_MODAL,\n      payload: {\n        name: \"\",\n        status: false,\n        data: null,\n      },\n    });\n  };\n\n  const completeCourse = () => {\n    finishCourseMutation.mutate();\n  };\n\n  const finishCourseMutation = useMutation(\n    () => courseService.completeCourse(form),\n    {\n      onError: (err) => {\n        errorMsg(notificationMsg(err, null));\n        cancel();\n      },\n      onSuccess: (res) => {\n        successMsg(notificationMsg(res, \"COURSE_FINISHED\"));\n        cancel();\n      },\n    }\n  );\n\n  // useEffect(() => {\n  //   setForm({\n  //     complete: true,\n  //     courseId: contextState.modal.data.course_id,\n  //     userId: contextState.modal.data.student_id,\n  //     teacherId: loggedUser?.id,\n  //   });\n  // }, [\n  //   contextState.modal.data.course_id,\n  //   contextState.modal.data.student_id,\n  //   loggedUser?.id,\n  // ]);\n\n  return (\n    <div\n      id=\"finishing-course-modal\"\n      className=\"course-course-modal rounded-lg w-4/12 xl:w-2/12 h-3/12 bg-gray-400 flex flex-row absolute text-tiny felx items-center justify-center\"\n    >\n      <div className=\"flex items-center justify-between w-full px-8\">\n        <span\n          onClick={cancel}\n          className=\"bg-darkRed py-2 px-4 rounded-lg cursor-pointer\"\n        >\n          Cancel\n        </span>\n        <span\n          onClick={completeCourse}\n          className=\"bg-darkGreen py-2 px-4 rounded-lg cursor-pointer\"\n        >\n          Complete\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default FinishingCourseModal;\n"],"mappings":";;;AAAA,OAAO,WAAP;AACA,SAASA,UAAT,QAA+B,OAA/B;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,eAAT,QAAgC,4BAAhC;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,sCAArC;AACA,SAASC,aAAT,QAA8B,2CAA9B;AACA,SAASC,WAAT,QAA4B,8CAA5B;AACA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,aAA5C;;;AAGA,MAAMC,oBAAwB,GAAG,MAAM;EAAA;;EACrC,MAAM,CAACC,YAAD,EAAeC,QAAf,IAA2BX,UAAU,CAACC,UAAD,CAA3C;EACA,MAAMW,UAAU,GAAGJ,cAAc,GAAGK,YAAjB,CAA2C,YAA3C,CAAnB;EAEA,MAAMC,IAAuB,GAAG;IAC9BC,QAAQ,EAAE,IADoB;IAE9BC,QAAQ,EAAEN,YAAY,CAACO,KAAb,CAAmBC,IAAnB,CAAwBC,SAFJ;IAG9BC,MAAM,EAAEV,YAAY,CAACO,KAAb,CAAmBC,IAAnB,CAAwBG,UAHF;IAI9BC,SAAS,EAAEV,UAAF,aAAEA,UAAF,uBAAEA,UAAU,CAAEW;EAJO,CAAhC;;EAOA,MAAMC,MAAM,GAAG,MAAM;IACnBb,QAAQ,CAAC;MACPc,IAAI,EAAEnB,WAAW,CAACoB,SADX;MAEPC,OAAO,EAAE;QACPC,IAAI,EAAE,EADC;QAEPC,MAAM,EAAE,KAFD;QAGPX,IAAI,EAAE;MAHC;IAFF,CAAD,CAAR;EAQD,CATD;;EAWA,MAAMY,cAAc,GAAG,MAAM;IAC3BC,oBAAoB,CAACC,MAArB;EACD,CAFD;;EAIA,MAAMD,oBAAoB,GAAGxB,WAAW,CACtC,MAAMF,aAAa,CAACyB,cAAd,CAA6BhB,IAA7B,CADgC,EAEtC;IACEmB,OAAO,EAAGC,GAAD,IAAS;MAChB9B,QAAQ,CAACF,eAAe,CAACgC,GAAD,EAAM,IAAN,CAAhB,CAAR;MACAV,MAAM;IACP,CAJH;IAKEW,SAAS,EAAGC,GAAD,IAAS;MAClBjC,UAAU,CAACD,eAAe,CAACkC,GAAD,EAAM,iBAAN,CAAhB,CAAV;MACAZ,MAAM;IACP;EARH,CAFsC,CAAxC,CA1BqC,CAwCrC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,oBACE;IACE,EAAE,EAAC,wBADL;IAEE,SAAS,EAAC,sIAFZ;IAAA,uBAIE;MAAK,SAAS,EAAC,+CAAf;MAAA,wBACE;QACE,OAAO,EAAEA,MADX;QAEE,SAAS,EAAC,gDAFZ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAOE;QACE,OAAO,EAAEM,cADX;QAEE,SAAS,EAAC,kDAFZ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA;EAJF;IAAA;IAAA;IAAA;EAAA,QADF;AAqBD,CA1ED;;GAAMrB,oB;UAEeD,c,EAwBUD,W;;;KA1BzBE,oB;AA4EN,eAAeA,oBAAf"},"metadata":{},"sourceType":"module"}